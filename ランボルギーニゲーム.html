<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/sample.css">
  <title>じゃんけん</title>
</head>

<body>
  <header>
    <h1>ランボルギーニゲーム</h1>
  </header>

  <main>
    <p>
      あなたの前に3つの扉があります。1つの後ろにはスーパーカーのランボルギーニが、2つの扉の向こうにはヤギがいます。扉を当てれたら、ランボルギーニはあなたのものです。扉を選んでください。
    </p>
    <div class="door_img">
      <div class="door_box">
        <div id="door1">
          <img class="doorimg" src="img/door.png" alt="">
        </div>
        <div id="door2">
          <img class="doorimg" src="img/door.png" alt="">
        </div>
        <div id="door3">
          <img class="doorimg" src="img/door.png" alt="">
        </div>
      </div>
    </div>
    <div id="com_hand"></div>
    <div id="count"></div>
    <div id="result"></div>
  </main>

  <footer></footer>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script>
    let co1 = 0;//ランボルギーニ
    let co2 = 0;//ヤギ
    // 1~3
    const min = 1;
    const max = 3;
    let num1 = [Math.floor(Math.random() * (max - min + 1) + min)];
    for (let i = 0; i < 100; i++) {
      num1.push(Math.floor(Math.random() * (max - min + 1) + min));
    }
    // 1or2
    const minn = 1;
    const maxx = 2;
    let num2 = [Math.floor(Math.random() * (maxx - minn + 1) + minn)];
    for (let i = 0; i < 100; i++) {
      num2.push(Math.floor(Math.random() * (maxx - minn + 1) + minn));
    }
    let dr1 = 0;
    let dr2 = 0;
    let dr3 = 0;
    let j = 0;
    // 左を選んだ時！！
    $("#door1").on("click", function () {
      dr1 = dr1 + 0.6;
      if (dr1 + dr2 + dr3 < 1) {
        console.log("d11");
        $("#door1").html('<img id="select" class="door_visited" src="img/door.png" alt="">');
        $("#com_hand").text("選ばなかったドアのどちらかには必ずハズレがあります。ハズレを知りたくないですか？知りたい人は”ここ”をクリック！");

      }
      else if (dr1 + dr2 + dr3 > 1) {
        console.log("d12");
        if (num1[j] != 1) {
          $("#door1").html('<img class="doorimgyagi"" src="img/dyagi.png" alt="">');
          $("#com_hand2").text("残念ヤギです");
          co2 = co2 + 1;
          $("#count").text("ランボルギーニ" + co1 + "台　" + "ヤギ" + co2 + "匹　当たりの確率" + Math.floor(co1 / (co1 + co2) * 100) + "パーセント");
          $("#result").text("もう一度やる");
        }
        else if (num1[j] == 1) {
          $("#door1").html('<img class="atari"" src="img/atari.png" alt="">');
          $("#com_hand2").text("おめでとう！ランボルギーニゲット！！");
          co1 = co1 + 1;
          $("#count").text("ランボルギーニ" + co1 + "台　" + "ヤギ" + co2 + "匹　当たりの確率" + Math.floor(co1 / (co1 + co2) * 100) + "パーセント");
          $("#result").text("もう一度やる");
        }
      }
    }
    );


    // 中を選んだ時！！
    $("#door2").on("click", function () {
      dr2 = dr2 + 0.6;
      if (dr1 + dr2 + dr3 < 1) {
        console.log("d21");
        $("#door2").html('<img id="select" class="door_visited" src="img/door.png" alt="">');
        $("#com_hand").text("選ばなかったドアのどちらかには必ずハズレがあります。ハズレを知りたくないですか？知りたい人は”ここ”をクリック！");

      }
      else if (dr1 + dr2 + dr3 > 1) {
        console.log("d22");
        if (num1[j] != 2) {
          $("#door2").html('<img class="doorimgyagi"" src="img/dyagi.png" alt="">');
          $("#com_hand2").text("残念ヤギです");
          co2 = co2 + 1;
          $("#count").text("ランボルギーニ" + co1 + "台　" + "ヤギ" + co2 + "匹　当たりの確率" + Math.floor(co1 / (co1 + co2) * 100) + "パーセント");
          $("#result").text("もう一度やる");
        }
        else if (num1[j] == 2) {
          $("#door2").html('<img class="atari"" src="img/atari.png" alt="">');
          $("#com_hand2").text("おめでとう！ランボルギーニゲット！！");
          co1 = co1 + 1;
          $("#count").text("ランボルギーニ" + co1 + "台　" + "ヤギ" + co2 + "匹　当たりの確率" + Math.floor(co1 / (co1 + co2) * 100) + "パーセント");
          $("#result").text("もう一度やる");
        }
      }
    }
    );


    // 右を選んだ時！！
    $("#door3").on("click", function () {
      dr3 = dr3 + 0.6;
      if (dr1 + dr2 + dr3 < 1) {
        console.log("d31");
        console.log(num1[j]);
        console.log(num2[j]);
        $("#door3").html('<img id="select" class="door_visited" src="img/door.png" alt="">');
        $("#com_hand").text("選ばなかったドアのどちらかには必ずハズレがあります。ハズレを知りたくないですか？知りたい人は”ここ”をクリック！");

      }
      else if (dr1 + dr2 + dr3 > 1) {
        console.log("d32");
        if (num1[j] != 3) {
          $("#door3").html('<img class="doorimgyagi"" src="img/dyagi.png" alt="">');
          $("#com_hand2").text("残念ヤギです");
          co2 = co2 + 1;
          $("#count").text("ランボルギーニ" + co1 + "台　" + "ヤギ" + co2 + "匹　当たりの確率" + Math.floor(co1 / (co1 + co2) * 100) + "パーセント");
          $("#result").text("もう一度やる");
        }
        else if (num1[j] == 3) {
          $("#door3").html('<img class="atari"" src="img/atari.png" alt="">');
          $("#com_hand2").text("おめでとう！ランボルギーニゲット！！");
          co1 = co1 + 1;
          $("#count").text("ランボルギーニ" + co1 + "台　" + "ヤギ" + co2 + "匹　当たりの確率" + Math.floor(co1 / (co1 + co2) * 100) + "パーセント");
          $("#result").text("もう一度やる");
        }
      }
    }
    );

    $("#com_hand").on("click", function () {
      if (dr1 == 0.6) {
        if (num1[j] == 1) {
          if (num2[j] == 1) { $("#door2").html('<img class="doorimgyagi"" src="img/dyagi.png" alt="">'); }
          else if (num2[j] == 2) { $("#door3").html('<img class="doorimgyagi"" src="img/dyagi.png" alt="">'); }
        }
        else if (num1[j] == 2) { $("#door3").html('<img class="doorimgyagi"" src="img/dyagi.png" alt="">'); }
        else if (num1[j] == 3) { $("#door2").html('<img class="doorimgyagi"" src="img/dyagi.png" alt="">'); }
        $("#com_hand").text("さらにチャンス！選んだドアを変更できるよ！最終的に選んだドアをクリック！");
        $("#com_hand").attr("id", 'com_hand2');
      }
      else if (dr2 == 0.6) {
        if (num1[j] == 2) {
          if (num2[j] == 1) { $("#door1").html('<img class="doorimgyagi"" src="img/dyagi.png" alt="">'); }
          else if (num2[j] == 2) { $("#door3").html('<img class="doorimgyagi"" src="img/dyagi.png" alt="">'); }
        }
        else if (num1[j] == 1) { $("#door3").html('<img class="doorimgyagi"" src="img/dyagi.png" alt="">'); }
        else if (num1[j] == 3) { $("#door1").html('<img class="doorimgyagi"" src="img/dyagi.png" alt="">'); }
        $("#com_hand").text("さらにチャンス！選んだドアを変更できるよ！最終的に選んだドアをクリック！");
        $("#com_hand").attr("id", 'com_hand2');
      }

      else if (dr3 == 0.6) {
        if (num1[j] == 3) {
          if (num2[j] == 1) { $("#door1").html('<img class="doorimgyagi"" src="img/dyagi.png" alt="">'); }
          else if (num2[j] == 2) { $("#door2").html('<img class="doorimgyagi"" src="img/dyagi.png" alt="">'); }
          console.log("ここ");
        }
        else if (num1[j] == 1) { $("#door2").html('<img class="doorimgyagi"" src="img/dyagi.png" alt="">'); }
        else if (num1[j] == 2) { $("#door1").html('<img class="doorimgyagi"" src="img/dyagi.png" alt="">'); }
        $("#com_hand").text("さらにチャンス！選んだドアを変更できるよ！最終的に選んだドアをクリック！");
        $("#com_hand").attr("id", 'com_hand2');
        console.log("こっち");
      }
    }
    );



    $("#result").on("click", function () {
      $("#door1").html('<img class="doorimg" src="img/door.png" alt="">');
      $("#door2").html('<img class="doorimg" src="img/door.png" alt="">');
      $("#door3").html('<img class="doorimg" src="img/door.png" alt="">');
      j = j + 1;
      dr1 = 0;
      dr2 = 0;
      dr3 = 0;
      $("#com_hand2").text(j + 1 + "回目");
      $("#com_hand2").attr("id", 'com_hand');
    });

  </script>

</body>

</html>